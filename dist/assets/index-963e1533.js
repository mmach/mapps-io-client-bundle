var N=Object.defineProperty;var s=(p,i)=>N(p,"name",{value:i,configurable:!0});import{r as U,a as k,i as D,b as F,R as r,M as P,m as j,f as q,g as B,c as G,u as z,h as W,e as a,G as n,j as M,o as $}from"./index-3f4d4c10.js";var m={},H=D,V=F;Object.defineProperty(m,"__esModule",{value:!0});var S=m.default=void 0,J=V(U),K=H(k()),Q=(0,K.default)(J.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");S=m.default=Q;function Z(p){const i=r.useMemo(P().IconButton),g=r.useMemo(()=>j.byName("mapps-component-tooltip").component),C=r.useMemo(P().Image),[c,T]=r.useState([]),{selectors:{userProfileImageReducer:l=l},actions:{removeImage:f=f,setAsProfile:I=I,setLoading:u=u,uploadImage:A=A,getUserImages:_=_}}=q(),{actions:{openLightbox:h=h}}=B(),{selectors:{userProfileReducer:t=t},actions:{getUserInfo:v=v}}=G(),{getLabel:b,translate:x}=z(),{selectors:{authReducer:d=d},actions:{setAuthContext:y=y}}=W();r.useEffect(()=>{T(l.images)},[l.images]);const R=r.useMemo(()=>d.user.id==t.user.id,[t.user.id]);async function E(){let e=await v(t.user.id);e.data.id==d.user.id&&y(e.data)}s(E,"reloadAuthContext");async function L(e){const o=e.currentTarget.dataset.tag;await f({id:o}),await _({user_id:t.user.id}),await E()}s(L,"removeImageClick");async function w(e){u(!0),await I({blob_id:e.currentTarget.dataset.tag}),await E(),u(!1)}s(w,"setAsProfileClick");function O(e){c.forEach(o=>{o.id==e.currentTarget.dataset.tag&&h(o,c)})}return s(O,"clickImageHandler"),a(n,{className:"mapps-user-images-container",style:{display:"flex",flexDirection:"column",placeItems:"center",margin:16},children:a(n,{container:!0,spacing:3,className:"mapps-user-images-list",children:c.map(e=>M(n,{item:!0,xs:2,className:"mapps-user-images-list-item",children:[R&&M(n,{style:{marginBottom:"15px",display:"flex",justifyContent:"right"},children:[e.id!=t.user.blob_id&&R&&a(g,{title:x(b,"USER_SET_AS_PROFILE_IMAGE_TOOLTIP"),children:a(i,{className:"mapps-user-images-list-item-set-as-profile","data-tag":e.id,onClick:w,style:{marginTop:"-3px",cursor:"pointer"},children:a(S,{})})}),a(g,{title:x(b,"USER_REMOVE_IMAGE_TOOLTIP"),children:a(i,{className:"mapps-user-images-list-item-remove-button","data-tag":e.id,style:{cursor:"pointer"},onClick:L,children:a($,{})})})]}),a(C,{className:"mapps-user-images-list-item-image",animationDuration:1e3,"data-tag":e.id,onClick:O,src:window.env.BLOB_URL+"/blob/"+e.blob_thumbmail_id,style:{cursor:"pointer"}})]},e.id))})})}s(Z,"ProfileImagesContainer");export{Z as default};
