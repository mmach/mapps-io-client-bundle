var G=Object.defineProperty;var n=(d,c)=>G(d,"name",{value:c,configurable:!0});import{R as a,m as l,M,u as O,c as U,l as w,h as x,j as L,F as D,G as i,e as t,E as R}from"./index-06cc938e.js";const k="/assets/user-c7774c07.svg";function j(){const d=a.useMemo(()=>l.byName("mapps-component-map-form").component),c=a.useMemo(()=>l.byName("mapps-component-map-form-details").component),C=a.useMemo(()=>l.byName("mapps-component-button-loader").component),m=a.useMemo(M().Layouts.Groups.V1),[E,p]=a.useState(!1),[N,f]=a.useState(!1),[s,_]=a.useState({}),{translate:r,getLabel:u,getSuccessGlobal:A}=O(),{selectors:{userProfileReducer:e=e},actions:{getUserInfo:h=h}}=U(),{actions:{setSnackbar:g=g}}=w(),{actions:{setLatLng:S=S,getAuthorizedUserInfo:F=F,setAuthContext:y=y}}=x();a.useEffect(()=>{p(!1),e.user&&e.user.id&&(_({address:{postcode:e.user.zipcode,road:e.user.address,city_id:e.user.city_id,city:e.user.cite,country_id:e.user.country_id,state:e.user.state,neighbourhood:e.user.neighbourhood,flat_number:e.user.flat_number,house_number:e.user.house_number},place_id:e.user.place_id,lon:e.user.longitude,lat:e.user.latitude}),p(!0))},[e.user.id]);async function I(){f(!0),await S({longitude:s.lon,latitude:s.lat,zipcode:s.address.postcode,address:s.address.road,city_id:s.address.city_id,city:s.address.city,country_id:s.address.country_id,state:s.address.state,neighbourhood:s.address.neighbourhood,flat_number:s.address.flat_number,house_number:s.address.house_number,place_id:s.place_id});const o=await h(e.user.id);await y(o.data,localStorage.token,localStorage.refresh_token),f(!1),g(R.CODE.SUCCESS_GLOBAL,r(A,"SET_LANG_SAVE_SUCCESS"))}n(I,"submitHandler");function b(o){o&&o.address&&_(o)}return n(b,"onChange"),E&&L(D,{children:[L(i,{style:{display:"flex",flexDirection:"row"},children:[t(m,{title:r(u,"USER_INFO_LOCATION_SEARCH"),children:t(i,{className:"mapps-form mapps-set-localisation-form-input",style:{display:"grid",width:"100%",height:500},children:t(d,{className:"mapps-user-profile-set-localisation",data:s,pinIcon:k,onChange:b})})}),t(m,{title:r(u,"USER_INFO_LOCATION_DETAILS"),children:t(i,{className:"mapps-form mapps-set-localisation-form-details",style:{display:"grid",width:"100%"},children:t(c,{data:s,onChange:b})})})]}),t(i,{className:"mapps-form-actions mapps-set-localisation-form-button",children:t(C,{onClick:I,color:"primary",size:"medium",value:r(u,"SUBMIT"),isLoading:N})})]})}n(j,"SetLatlng");export{j as default};
