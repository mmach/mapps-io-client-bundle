import{a as k,$ as x,i as T,a0 as j,R as n,bl as P,bm as U,Y as q,as as V,M as v,bn as W,U as B,j as e,G as i,W as u,bo as $,bp as z,bq as Y,l as d}from"./index-1a5b9518.js";var f={},G=T,H=j;Object.defineProperty(f,"__esModule",{value:!0});var m=f.default=void 0,J=H(k),N=G(x()),X=(0,N.default)(J.createElement("path",{d:"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"AccountBalanceWallet");m=f.default=X;function K(l){const[I,b]=n.useState(!0),[r,g]=n.useState(new Date),[p,y]=n.useState([]),h=P({}),S=U(),w=q(),A=V(),D=n.useMemo(v().Layouts.Table.V2),O=n.useMemo(v().IUA.PREVIEW.DEFAULT),c=W(),{translate:M,getLabel:F}=B();n.useEffect(()=>()=>c.actions.clean(),[]),n.useEffect(()=>{b(!0),c.actions.getInvoices({year:r.getFullYear(),month:r.getMonth(),asAdmin:!0}).then(t=>{const a=t.data.filter(o=>!h.selectors.iuaReducer.iuaRelations[o.iua.id]).map(o=>o.iua.id);if(b(!1),a.length>0)return h.actions.getIuaList(a)}).then(t=>{if(t&&t.data){const a=[...new Set(t.data.map(o=>o.category_id))];A.hooks.setCategoryIds(a)}})},[r]),n.useEffect(()=>{y([...c.selectors.invoicesAdminReducer.invoices]),console.log(c.selectors.invoicesAdminReducer.invoices)},[c.selectors.invoicesAdminReducer.invoices]);function C(t){const a=t;window.scrollTo(0,0),g(a)}function _(t,a){w.actions.openDrawer(!0,e(i,{container:!0,style:{width:1100},children:e(O,{iua_id:a.iua.id,cmsMode:"DEFAULT",device:"desktop"})}),"right")}function L(t,a){const o=a.id,s=p.filter(E=>E.id==o)[0],R={pdf_id:s.blob.blob_id,subject:M(F,"SEND_MAIL_SUBJECT",s.number_string,s.month+"/"+s.year),body:`${window.env.BLOB_URL}/blob/${s.blob.blob_id}.pdf`};S.actions.openModal(!0,e(Y,{...R}))}return e(i,{container:!0,style:{justifyContent:"center"},children:e(D,{isLoading:I,icons:u,freeActions:[e($,{variant:"month",label:"Month",dateFormat:"MM/yyyy",showMonthYearPicker:!0,value:r,onChange:C})],...z({}),actions:[t=>({icon:u.OpenIn,label:"Open IUA",onClick:_}),t=>({icon:u.PictureAsPdf,label:"Open Invoice",onClick:L})],data:p.sort((t,a)=>new Date(a.createdAt)>new Date(t.createdAt)).map(t=>({...t,info:{number:t.number}})),title:"Invoices List"})})}function Z(){const l=n.useMemo(v().Layouts.Containers.V1);return d(i,{container:!0,style:{justifyContent:"center"},children:[d(l,{title:"TODOOOO",icon:e(m,{}),xs:12,sm:12,children:["TODOOOOOOs",d(i,{children:["Income/Outcome types,",e("br",{}),"Fill auto get incoide or manual invoice flag,",e("br",{}),"Allow to gen manual invoice,",e("br",{}),"Allow edit only manual invoice,",e("br",{}),"link income / outcome invoices,",e("br",{}),"Snapshot for user invoice information values",e("br",{}),"FIX backend to gen invoice based on inputs",e("br",{}),"Socket for invoice status change",e("br",{})]}),e(i,{children:"Income - include fees and tax, Outcome - price with tax"}),e(i,{children:"Calculate summary income for all fees"})]}),e(l,{title:"Invoices",icon:e(m,{}),xs:12,sm:12,children:e(K,{})})]})}export{Z as default};
