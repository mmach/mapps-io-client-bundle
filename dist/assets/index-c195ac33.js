import{U as F,R as o,M as T,a1 as K,j as e,a3 as x,l as y,ai as O,aj as Y,ak as k,al as le,X as A,G as c,m as ae,Y as re,a5 as D,a6 as P,a7 as U,am as J,ag as ie,a4 as ce,ah as de}from"./index-1a5b9518.js";import{u as ue}from"./hook-441035b6.js";import{u as R}from"./hook-1db5f067.js";const pe=["!","|","&","=",">",">=","*","+","-","/","<=","<"];function me({categoryOptionTemplate:g,setCategoryOptionTemplate:v,isSelection:n,isNumeric:l,isStrict:_,isDimReference:d}){const{translate:u,getLabel:r}=F(),s=o.useMemo(T().Layouts.Sections.V1),[a,t]=o.useState({...g});o.useEffect(()=>{v(a)},[a]);const{selectors:{dimensionsSelector:m}}=K();function p(f){const w=Object.keys(f).map(C=>f[C].label).join(" ");t({...a,func:w})}function i(){return[{id:null,value:null},...m.filter(f=>f.cott_id==(a.cott_id.id?a.cott_id.id:a.cott_id)).map(f=>({id:f.id,value:f.name}))]}function S(){return[{id:"",value:""},...m.filter(f=>f.as_cat_ref==!0).map(f=>({id:f.id,value:f.name}))]}return e(x,{children:y(s,{title:u(r,"Category Options Template Core"),children:[e(O,{label:u(r,"Token"),value:a.token,onChange:f=>t({...a,token:f.target.value}),field:"Name",validation:[]}),e(O,{noLabel:!0,label:u(r,"Option Value"),value:a.value,onChange:f=>t({...a,value:f.target.value}),field:"value",validation:[]}),!n()&&e(Y,{label:u(r,"Dimension referance value"),valueOptions:S(),value:a.dim_ref_id,onChange:f=>t({...a,dim_ref_id:f.target.value}),field:"type",validation:[]}),!n()&&e(Y,{label:u(r,"Dimension type"),valueOptions:i(),value:a.dim_id,onChange:f=>t({...a,dim_id:f.target.value}),field:"type",validation:[]}),!_()&&e(O,{label:u(r,"Order"),value:a.order,onChange:f=>t({...a,order:f.target.value}),field:"order",validation:[]}),!_()&&e(k,{label:u(r,"Active"),value:a.status,onChange:f=>t({...a,status:f.target.checked}),field:"order",validation:[]}),!d()&&!n()&&e(le,{id:"tagComponent",notUniq:!0,tags:a.func?a.func.split(" ").map(f=>({id:A(),value:A(),label:f})):[],label:"Function",onChange:p,suggestions:[...pe.map(f=>({value:f,label:f,type:"OPERATOR"})),,...m.map(f=>({id:A(),value:A(),label:`#$${f.name.trim()}#`,type:"PRIV"}))]})]})})}function ge({categoryOptionTemplate:g,setCategoryOptionTemplate:v,isSelection:n,isNumeric:l,isDimReference:_}){const{translate:d,getLabel:u}=F(),r=o.useMemo(T().Layouts.Sections.V1),[s,a]=o.useState({...g});return o.useEffect(()=>{v(s)},[s]),y(x,{children:[l()&&y(r,{title:d(u,"Category numeric type flags"),children:[e(k,{label:d(u,"Allow Negative"),value:s.allow_negative,onChange:t=>a({...s,allow_negative:t.target.checked}),field:"is_required",validation:[]}),e(k,{label:d(u,"Allow Empty Formatting"),value:s.allow_empty_formatting,onChange:t=>a({...s,allow_empty_formatting:t.target.checked}),field:"allow_empty_formatting",validation:[]}),e(k,{label:d(u,"Allow Leading Zero"),value:s.allow_leading_zeros,onChange:t=>a({...s,allow_leading_zeros:t.target.checked}),field:"is_required",validation:[]}),y(c,{container:!0,children:[y(c,{container:!0,spacing:3,children:[e(c,{item:!0,xs:"6",children:e(O,{label:d(u,"Min"),value:s.min,onChange:t=>a({...s,min:t.target.value}),field:"min",validation:[]})}),e(c,{item:!0,xs:"6",children:e(O,{label:d(u,"Min Message Token"),value:s.min_message,onChange:t=>a({...s,min_message:t.target.value}),field:"min_message",validation:[]})})]}),y(c,{container:!0,spacing:3,children:[e(c,{item:!0,xs:"6",children:e(O,{label:d(u,"Max"),value:s.max,onChange:t=>a({...s,max:t.target.value}),field:"max",validation:[]})}),e(c,{item:!0,xs:"6",children:e(O,{label:d(u,"Max Message Token"),value:s.max_message,onChange:t=>a({...s,max_message:t.target.value}),field:"max_message",validation:[]})})]})]})]}),e(r,{title:d(u,"Category types with textfield"),children:y(c,{item:!0,xs:"12",children:[y(c,{container:!0,spacing:3,children:[e(c,{item:!0,xs:"6",children:e(k,{label:d(u,"Is Required"),value:s.is_required,onChange:t=>a({...s,is_required:t.target.checked}),field:"is_required",validation:[]})}),e(c,{item:!0,xs:"6",children:e(O,{label:d(u,"Is Required Message Token"),value:s.is_required_message,onChange:t=>a({...s,is_required_message:t.target.value}),field:"is_required_message",validation:[]})})]}),y(c,{container:!0,spacing:3,children:[e(c,{item:!0,xs:"6",children:e(O,{label:d(u,"Min Length"),value:s.min_length,onChange:t=>a({...s,min_length:t.target.value}),field:"min_length",validation:[]})}),e(c,{item:!0,xs:"6",children:e(O,{label:d(u,"Min Length Message Token"),value:s.min_length_message,onChange:t=>a({...s,min_length_message:t.target.value}),field:"min_length",validation:[]})})]}),y(c,{container:!0,spacing:3,children:[e(c,{item:!0,xs:"6",children:e(O,{label:d(u,"Max Length"),value:s.max_length,onChange:t=>a({...s,max_length:t.target.value}),field:"max_length",validation:[]})}),e(c,{item:!0,xs:"6",children:e(O,{label:d(u,"Max Length Message Token"),value:s.max_length_message,onChange:t=>a({...s,max_length_message:t.target.value}),field:"max_length",validation:[]})})]}),y(c,{container:!0,spacing:3,children:[e(c,{item:!0,xs:"6",children:e(O,{label:d(u,"Pattern"),value:s.pattern,onChange:t=>a({...s,pattern:t.target.value}),field:"pattern",validation:[]})}),e(c,{item:!0,xs:"6",children:e(O,{label:d(u,"Pattern Message Token"),value:s.pattern_message,onChange:t=>a({...s,pattern_message:t.target.value}),field:"pattern_length",validation:[]})})]})]})})]})}function _e({categoryOptionTemplate:g,setCategoryOptionTemplate:v}){const{translate:n,getLabel:l,getPlaceholder:_}=F(),d=o.useMemo(T().Layouts.Sections.V1),u=o.useMemo(()=>ae.byName("mapps-component-translate-component").component,[]),[r,s]=o.useState({...g});o.useEffect(()=>{v(r)},[r]);function a(t){r.value_translation_id||(r.value_translation_id=A()),t.id||(t.id=r.value_translation_id),s({...r,value_translation:t})}return e(x,{children:e(d,{title:n(l,"LANG_TEXTBOX"),children:e(u,{translation:r.value_translation||{},setTranslate:a})})})}function he({categoryOptionTemplate:g,setCategoryOptionTemplate:v,isSelection:n,isNumeric:l}){const{translate:_,getLabel:d}=F(),u=o.useMemo(T().Layouts.Sections.V1),[r,s]=o.useState({...g});return o.useEffect(()=>{v(r)},[r]),y(x,{children:[y(u,{title:_(d,"Category Options Template CMS Common Flags"),children:[e(k,{label:_(d,"Allow to freetext search"),value:r.is_not_in_clob,onChange:a=>{s({...r,is_not_in_clob:a.target.checked})},field:"is_in_clob",validation:[]}),e(k,{label:_(d,"Is visible in view"),value:r.is_visible_view,onChange:a=>{s({...r,is_visible_view:a.target.checked})},field:"is_visible_view",validation:[]}),e(k,{label:_(d,"Is visible in form"),value:r.is_visible_form,onChange:a=>{s({...r,is_visible_form:a.target.checked})},field:"is_visible_form",validation:[]}),e(k,{label:_(d,"Is visible in search"),value:r.is_visible_search,onChange:a=>{s({...r,is_visible_search:a.target.checked})},field:"is_visible_search",validation:[]})]}),n()&&y(u,{title:_(d,"Category Select/Multiselect Flags"),children:[e(k,{label:_(d,"Is Prefix"),value:r.is_prefix,onChange:a=>s({...r,is_prefix:a.target.checked}),field:"is_prefix",validation:[]}),e(k,{label:_(d,"Is Suffix"),value:r.is_suffix,onChange:a=>s({...r,is_suffix:a.target.checked}),field:"is_suffix",validation:[]}),e(k,{label:_(d,"Is readonly"),value:r.is_readOnly,onChange:a=>{s({...r,is_readOnly:a.target.checked})},field:"is_visible_search",validation:[]}),e(k,{label:_(d,"Is DEFAULT"),value:r.is_default_value,onChange:a=>{s({...r,is_default_value:a.target.checked})},field:"is_default_value",validation:[]})]}),l()&&e(u,{title:_(d,"Category options template numeric type flags"),children:y(c,{container:!0,spacing:3,children:[e(c,{item:!0,xs:"4",children:e(O,{label:_(d,"Decimal Scale"),value:r.decimal_scale,onChange:a=>s({...r,decimal_scale:a.target.value}),field:"mask",validation:[]})}),e(c,{item:!0,xs:"4",children:e(O,{label:_(d,"DEFAULT VALUE"),value:r.default_value,onChange:a=>s({...r,default_value:a.target.value}),field:"default_value",validation:[]})}),e(c,{item:!0,xs:"4",children:e(O,{label:_(d,"INPUT FORMAT"),value:r.input_format,onChange:a=>s({...r,input_format:a.target.value}),field:"input_format",validation:[]})})]})}),!n()&&e(u,{title:_(d,"Category options template textfield type flags"),children:e(c,{item:!0,xs:"12",children:e(O,{label:_(d,"mask"),value:r.mask,onChange:a=>s({...r,mask:a.target.value}),field:"mask",validation:[]})})})]})}function fe({categoryOptionTemplate:g}){const{translate:v,getLabel:n}=F(),l=o.useMemo(T().Layouts.Sections.V1),[_,d]=o.useState({...g});return e(x,{children:y(l,{title:v(n,"Category Options Template Details"),children:[e(O,{label:v(n,"Id"),value:_.id,field:"Id",disabled:!0,validation:[]}),e(O,{label:v(n,"Order"),value:_.order,disabled:!0,field:"order",validation:[]}),e(O,{label:v(n,"Type"),value:_.cat_opt_type_template.type,disabled:!0,field:"type",validation:[]})]})})}const Q=({catSingleOption:g,readOnly:v})=>{const[n,l]=o.useState(g),[_,d]=o.useState(!0),u=o.useMemo(T().Layouts.Tab.V1),r=o.useMemo(T().ButtonLoader),s=o.useMemo(T().BodyLoader),{translate:a,getLabel:t}=F(),{selectors:{getCategoryTypes:m},actions:{upsertCategoryOptionTemplate:p}}=R();o.useEffect(()=>{d(!0),setTimeout(()=>{l(g),d(!1)},500)},[g]);function i(){p(n)}function S(){return["SELECT","MULTISELECT"].includes(m.find(I=>I.id==n.cat_opt_type_template.cot_id).type)}function f(){return["float","int"].includes(n.cat_opt_type_template.type)}function w(){return m.find(I=>I.id==n.cat_opt_type_template.cot_id).is_strict}function C(){return n.dim_ref_id}return!v&&_?e(c,{style:{height:"400px",display:"flex"},children:e(s,{text:" ",size:"25px"})}):!_&&y(c,{container:!0,children:[e(u,{defaultTab:0,tabConfig:[{label:"Core",render:()=>e(me,{categoryOptionTemplate:n,setCategoryOptionTemplate:l,isSelection:S,isDimReference:C,isNumeric:f,isStrict:w})},!C()&&!S()&&{label:"Validation",render:()=>e(ge,{categoryOptionTemplate:n,setCategoryOptionTemplate:l,isSelection:S,isDimReference:C,isNumeric:f})},!C()&&{label:"CMS Flags",render:()=>e(he,{categoryOptionTemplate:n,setCategoryOptionTemplate:l,isSelection:S,isDimReference:C,isNumeric:f})},!C()&&{label:"Translate",render:()=>e(_e,{categoryOptionTemplate:n,setCategoryOptionTemplate:l,isSelection:S,isDimReference:C,isNumeric:f})},{label:"Details",render:()=>e(fe,{categoryOptionTemplate:n,setCategoryOptionTemplate:l,isSelection:S,isDimReference:C,isNumeric:f})}]}),!v&&e(r,{color:"primary",onClick:i,value:a(t,"Save"),variant:"outlined"})]})};function ee({catOptionId:g,readOnly:v}){const{translate:n,getLabel:l}=F(),{selectors:{getCategoryOptionsById:_},hooks:{setCategoryOptionId:d},functions:{isLoaded:u},actions:{upsertCategoryOptionTemplate:r}}=R(),{actions:s}=re(),a=o.useMemo(T().Layouts.Sections.V1),t=o.useMemo(T().ButtonLoader),[m,p]=o.useState(),[i,S]=o.useState();o.useEffect(()=>{d(g)},[g]),o.useEffect(()=>{S(_)},[_]);const f=o.useMemo(()=>{const h=i&&i.cat_opt_temp.find(L=>L.id==m);return m&&h?e(Q,{catSingleOption:h}):e(c,{})},[m,i]);function w(h){const L=i.cat_opt_temp.find(B=>B.id==h.currentTarget.dataset.key);L&&s.openDrawer(!0,e(c,{style:{width:"50vw",display:"flex"},children:e(Q,{readOnly:!0,catSingleOption:L})}))}function C(h){if(v)w(h);else{const L=i.cat_opt_temp.find(B=>B.id==h.currentTarget.dataset.key);p(L.id)}}function I(h){if(v)return;const L=A(),B=i.cat_opt.cat_options_type_temp.find(Z=>Z.id==h.currentTarget.dataset.tag),G=A();r({co_id:i.id,id:L,cott_id:h.currentTarget.dataset.tag,order:B.order,status:1,value_translation_id:G,value_translation:{id:G}}),p(L)}function V(h){const L=A(),B=i.cat_opt.cat_options_type_temp[0],G=A();r({co_id:i.id,id:L,cott_id:B.id,order:-1,status:0,value_translation_id:G,value_translation:{id:G}}),p(L)}return u(g)&&i?u(g)&&i&&y(c,{container:!0,style:{flexFlow:"row",gap:"1rem"},children:[y(c,{container:!0,style:{flexDirection:"column"},sm:v?12:2,xs:12,children:[i.cat_opt&&i.cat_opt.is_strict&&e(a,{title:n(l,"Category Option Templates Strict"),children:e(D,{className:"mapps-io-list-link",style:{width:"100%"},children:i.cat_opt&&i.cat_opt.is_strict&&i.cat_opt.cat_options_type_temp.sort((h,L)=>Number(h.order)>Number(L.order)?1:-1).map(h=>{const L=i.cat_opt_temp.find(B=>B.cott_id==h.id)||{};return e(c,{className:"mapps-io-list-item",children:e(P,{"data-tag":h.id,button:!0,"data-key":L.id,onClick:L.id?C:I,className:L.id?m==L.id&&"selected":"primary",children:e(U,{children:L.token||L.value||h.order})})},h.id)})})}),i.cat_opt&&!i.cat_opt.is_strict&&e(a,{title:n(l,"Category Option Templates Not Strict"),children:y(x,{children:[e(D,{className:"mapps-io-list-link",style:{width:"100%"},children:i.cat_opt_temp.filter(h=>h.status==1).sort((h,L)=>Number(h.order)>Number(L.order)?1:-1).map(h=>e(c,{className:"mapps-io-list-item",children:e(P,{"data-tag":h.cott_id,button:!0,"data-key":h.id,onClick:h.id?C:I,className:h.id?m==h.id&&"selected":"primary",children:e(U,{children:h.token||h.value||h.order})})},h.id))}),!v&&e(t,{color:"primary",onClick:V,value:n(l,"Create new template"),variant:"outlined"})]})}),!v&&i.cat_opt&&!i.cat_opt.is_strict&&i.cat_opt_temp.find(h=>h.status==0)&&e(a,{title:n(l,"Category Option Templates Not Active"),children:e(x,{children:e(D,{className:"mapps-io-list-link",style:{width:"100%"},children:i.cat_opt_temp.filter(h=>h.status==0).sort((h,L)=>Number(h.order)>Number(L.order)?1:-1).map(h=>e(c,{className:"mapps-io-list-item",children:e(P,{"data-tag":h.cott_id,button:!0,"data-key":h.id,onClick:h.id?C:I,className:h.id?m==h.id&&"selected":"primary",children:e(U,{children:h.token||h.value||h.order})})},h.id))})})})]}),!v&&e(a,{title:n(l,"Category Option Templates"),sm:10,xs:12,children:e(c,{container:!0,spacing:"3",style:{flexDirection:"column"},children:f})})]}):e(x,{})}function ve({catOptionId:g}){const{translate:v,getLabel:n}=F(),l=o.useMemo(T().ButtonLoader),_=o.useMemo(T().Layouts.Tab.V1),{selectors:{getCategoryOptionsById:d},actions:{upsertCategoryOptions:u},hooks:{setCategoryOptionId:r},functions:{isLoaded:s}}=R(),[a,t]=o.useState();if(o.useEffect(()=>{r(g)},[g]),o.useEffect(()=>{t(d)},[d]),!(s(g)&&a))return e(x,{});function m(p){u(a)}return s(g)&&a&&y(c,{container:!0,children:[e(_,{defaultTab:0,tabConfig:[{label:"Search",render:()=>e(J,{mode:"json",theme:"monokai",value:a.search_params,onChange:p=>{t({...a,search_params:p})},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,width:"100%",height:"80vh"},showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!1,showLineNumbers:!0,tabSize:2}},1)},{label:"Create",render:()=>e(x,{children:e(J,{mode:"json",theme:"monokai",value:a.create_params,onChange:p=>{t({...a,create_params:p})},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,width:"100%",height:"80vh"},showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!1,showLineNumbers:!0,tabSize:2}},2)})},{label:"Preview",render:()=>e(x,{children:e(J,{mode:"json",theme:"monokai",value:a.preview_params,onChange:p=>{t({...a,preview_params:p})},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,width:"100%",height:"80vh"},showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!1,showLineNumbers:!0,tabSize:2}},3)})}]}),e(l,{color:"primary",onClick:m,value:v(n,"Save"),variant:"outlined"})]})}function ye({catOptionId:g,isImage:v}){const{translate:n,getLabel:l}=F(),_=o.useMemo(T().ButtonLoader),{selectors:{getCategoryOptionsById:d},actions:{upsertCategoryOptions:u},hooks:{setCategoryOptionId:r},functions:{isLoaded:s}}=R(),a=o.useMemo(T().Layouts.Sections.V1),[t,m]=o.useState();o.useEffect(()=>{r(g)},[g]),o.useEffect(()=>{m(d)},[d]);function p(i){u(t)}return s(g)&&t?s(g)&&t&&y(x,{children:[v()&&e(a,{title:"Limitations settings",children:e(c,{container:!0,spacing:3,children:e(O,{label:n(l,"Limit of"),value:t.limit_of,onChange:i=>{m({...t,limit_of:i.target.value})},field:"name",validation:[]})})}),y(a,{title:"Search settings",children:[e(O,{label:n(l,"Order search"),value:t.order_search,onChange:i=>{m({...t,order_search:i.target.value})},field:"order",validation:[]}),e(k,{label:n(l,"Is searchable"),value:t.is_searchable,onChange:i=>{m({...t,is_searchable:i.target.checked})},field:"is_searchable",validation:[]}),e(k,{label:n(l,"Show above pin on map"),value:t.is_on_pin_map,onChange:i=>{m({...t,is_on_pin_map:i.target.checked})},field:"is_on_pin_map",validation:[]}),e(k,{label:n(l,"Can above pin (search)"),value:t.can_above_pin,onChange:i=>{m({...t,can_above_pin:i.target.checked})},field:"is_visible_view",validation:[]}),e(k,{label:n(l,"Treat as url params"),value:t.is_params,onChange:i=>{m({...t,is_params:i.target.checked})},field:"is_form_hidden",validation:[]}),e(k,{label:n(l,"On main page search"),value:t.is_on_main_page,onChange:i=>{m({...t,is_on_main_page:i.target.checked})},field:"is_visible_view",validation:[]})," "]}),y(a,{title:"Create settings",children:[e(O,{label:n(l,"Order label"),value:t.order,onChange:i=>{m({...t,order:i.target.value})},field:"order",validation:[]}),e(k,{label:n(l,"Is require"),value:t.is_require,onChange:i=>{m({...t,is_require:i.target.checked})},field:"is_require",validation:[]}),e(k,{label:n(l,"Is  on form rendered"),value:t.is_form_rendered,onChange:i=>{m({...t,is_form_rendered:i.target.checked})},field:"is_form_rendered",validation:[]}),e(k,{label:n(l,"Is in form hidden"),value:t.is_form_hidden,onChange:i=>{m({...t,is_form_hidden:i.target.checked})},field:"is_form_hidden",validation:[]})]}),y(a,{title:"Preview settings",children:[e(k,{label:n(l,"Is on map list"),value:t.is_on_map,onChange:i=>{m({...t,is_on_map:i.target.checked})},field:"is_on_map",validation:[]}),e(k,{label:n(l,"Is visible in preview"),value:t.is_visible_view,onChange:i=>{m({...t,is_visible_view:i.target.checked})},field:"is_visible_view",validation:[]})]}),y(a,{title:"IUA settings",children:[e(k,{label:n(l,"On IUA view"),value:t.is_on_iua,onChange:i=>{m({...t,is_on_iua:i.target.checked})},field:"is_visible_view",validation:[]}),e(k,{label:n(l,"Init on IUA request"),value:t.is_on_iua_request,onChange:i=>{m({...t,is_on_iua_request:i.target.checked})},field:"is_on_pin_map",validation:[]})]}),e(_,{color:"primary",onClick:p,value:n(l,"Save"),variant:"outlined"})]}):e(x,{})}function te({catOptionId:g,readOnly:v}){const{translate:n,getLabel:l}=F(),_=o.useMemo(T().Layouts.Sections.V1),d=o.useMemo(T().ButtonLoader),{selectors:{getCategoryOptionsById:u,getCategoryTypes:r},actions:{upsertCategoryOptions:s},hooks:{setCategoryOptionId:a},functions:{isLoaded:t}}=R(),{selectors:{dimensionsSelector:m}}=K(),[p,i]=o.useState();o.useEffect(()=>{a(g)},[g]),o.useEffect(()=>{i(u)},[u]);function S(){return[{id:null,value:null},...m.filter(C=>C.co_type_id==p.cot_id&&C.cott_id==null).map(C=>({id:C.id,value:C.name}))]}function f(){const C=Array.isArray(r)?r.map(I=>({id:I.id,value:I.name,type:I.type})):[];return[{id:void 0,value:"",type:void 0},...C]}function w(C){s(p)}return t(g)&&p?t(g)&&p&&y(x,{children:[y(_,{title:n(l,"Core"),children:[v&&y(c,{item:!0,xs:"12",children:[e(O,{label:n(l,"Id"),value:p.id,onChange:C=>{i({...p,name:C.target.value})},disabled:!0,field:"name",validation:[]}),p.lang]}),y(c,{item:!0,xs:"12",children:[e(O,{label:n(l,"Name"),value:p.name,onChange:C=>{i({...p,name:C.target.value})},disabled:v,field:"name",validation:[]}),p.lang]}),e(Y,{disabled:p.cot_id,isRequired:!0,value:p&&p.cot_id,label:n(l,"CATEGORY_TEMP_OPTION_TYPE_LABEL"),valueOptions:f(),field:"type"}),e(c,{item:!0,xs:"12",children:e(Y,{disabled:v,label:n(l,"Dimension"),valueOptions:S(),value:p.dim_id,onChange:C=>{i({...p,dim_id:C.target.value.length>0?C.target.value:null})},field:"type",validation:[]})}),e(c,{item:!0,xs:"12",children:e(k,{disabled:v,label:n(l,"Active"),value:p.status,onChange:C=>i({...p,status:C.target.checked}),field:"status",validation:[]})})]}),!v&&e(x,{children:e(d,{color:"primary",onClick:w,value:n(l,"Save"),variant:"outlined"})})]}):e(x,{})}function Ce({catOptionId:g}){const{translate:v,getLabel:n}=F(),{selectors:{getCategoryOptionsById:l},actions:{upsertCategoryOptions:_},hooks:{setCategoryOptionId:d},functions:{isLoaded:u}}=R(),r=o.useMemo(()=>ae.byName("mapps-component-translate-component").component,[]),s=o.useMemo(T().Layouts.Sections.V1),a=o.useMemo(T().ButtonLoader),[t,m]=o.useState();o.useEffect(()=>{d(g)},[g]),o.useEffect(()=>{m(l)},[l]);function p(S){m({...t,translation:S})}function i(S){t.translation_id||(t.translation_id=A()),t.translation.id=t.translation_id,_(t)}return u(g)&&t?u(g)&&t&&y(x,{children:[e(s,{title:v(n,"LANG_TEXTBOX"),children:e(r,{translation:t.translation||{},setTranslate:p})}),e(a,{color:"primary",onClick:i,value:v(n,"Save"),variant:"outlined"})]}):e(x,{})}function be({catOptionId:g,isMultiselection:v}){const{translate:n,getLabel:l}=F(),{selectors:{getCategoryOptionsById:_},hooks:{setCategoryOptionId:d},actions:{upsertCategoryOptions:u},functions:{isLoaded:r}}=R(),s=o.useMemo(T().Layouts.Sections.V1),a=o.useMemo(T().ButtonLoader),[t,m]=o.useState();o.useEffect(()=>{d(g)},[g]),o.useEffect(()=>{m(_)},[_]);function p(i){u(t)}return r(g)&&t?r(g)&&t&&y(x,{children:[y(s,{title:n(l,"Select Limitation"),children:[y(c,{container:!0,spacing:3,children:[e(c,{item:!0,xs:"12",sm:"5",children:e(k,{label:n(l,"Is Required"),value:t.is_required,onChange:i=>{m({catOption:t,is_required:i.target.checked})},field:"is_required",validation:[]})}),e(c,{item:!0,xs:"12",sm:"7",children:e(O,{label:n(l,"Is Required Message"),value:t.is_required_message,onChange:i=>{m({catOption:t,is_required_message:i.target.value})},field:"is_required_message",validation:[]})})]}),v()&&y(x,{children:[y(c,{container:!0,spacing:3,children:[e(c,{item:!0,xs:"12",sm:"5",children:e(O,{label:n(l,"Min Selected"),value:t.min_selected,onChange:i=>{m({catOption:t,min_selected:i.target.value})},field:"min_selected",validation:[]})}),e(c,{item:!0,xs:"12",sm:"7",children:e(O,{label:n(l,"Min Selected Message"),value:t.min_selected_message,onChange:i=>{m({catOption:t,min_selected_message:i.target.value})},field:"min_selected_message",validation:[]})})]}),y(c,{container:!0,spacing:3,children:[e(c,{item:!0,xs:"12",sm:"5",children:e(O,{label:n(l,"Max Selected"),value:t.max_selected,onChange:i=>{m({catOption:t,max_selected:i.target.value})},field:"max_selected",validation:[]})}),e(c,{item:!0,xs:"12",sm:"7",children:e(O,{label:n(l,"Max  Selected Message"),value:t.max_selected_message,onChange:i=>{m({catOption:t,max_selected_message:i.target.value})},field:"max_selected_message",validation:[]})})]})]})]}),e(a,{color:"primary",onClick:p,value:n(l,"Save"),variant:"outlined"})]}):e(x,{})}function Oe({catOptionId:g,readOnly:v}){const{translate:n,getLabel:l}=F(),_=o.useMemo(T().Layouts.Sections.V1),d=o.useMemo(T().ButtonLoader),u=ie(),{selectors:{getCategoryOptionsById:r,getCategoryTypes:s},actions:{upsertCategoryOptions:a},hooks:{setCategoryOptionId:t},functions:{isLoaded:m}}=R();K();const[p,i]=o.useState({id:A()});function S(){const w=Array.isArray(s)?s.map(C=>({id:C.id,value:C.name,type:C.type})):[];return[{id:void 0,value:"",type:void 0},...w]}function f(w){p.translation_id=A(),p.translation={id:p.translation_id},a(p).then(C=>{u(`/mapps/categories/categoriesOptions?catOptionId=${p.id}`)})}return e(x,{children:y(_,{title:n(l,"Create new Category Option"),children:[e(Y,{value:p.cot_id,label:n(l,"CATEGORY_TEMP_OPTION_TYPE_LABEL"),valueOptions:S(),onChange:w=>{i({...p,cot_id:w.target.value})},field:"type"}),y(c,{item:!0,xs:"12",children:[e(O,{label:n(l,"Name"),value:p.name,onChange:w=>{i({...p,name:w.target.value})},disabled:v,field:"name",validation:[]}),p.lang]}),e(d,{color:"primary",onClick:f,value:n(l,"Create"),variant:"outlined"})]})})}function Te({catOptionId:g}){const{translate:v,getLabel:n}=F(),l=o.useMemo(T().Layouts.Sections.V1),_=o.useMemo(T().Layouts.Groups.V1);o.useMemo(T().ButtonLoader);const{selectors:{getCategoryOptionsById:d,getAllCategoryOptionsReducer:u},hooks:{setCategoryOptionId:r},functions:{isLoaded:s}}=R(),{selectors:{dimensionsSelector:a}}=K(),t=ie(),{lang:m}=ce(),[p,i]=o.useState(),[S,f]=o.useState([]),[w,C]=o.useState([]),[I,V]=o.useState([]),[h,L]=o.useState([]);o.useEffect(()=>{r(g)},[g]),o.useEffect(()=>{i(d),d&&B(d,u)},[d]);function B(b,M){ne(b,M),oe(b,M),Z(b,M),G(b,M)}function G(b,M){const j=b.cat_opt_temp.filter(E=>E.func).map(E=>({func:E.func,dim:E.func.match(/#\$\w*#/g)?E.func.match(/#\$\w*#/g).map(q=>a.find(z=>z.name==q.replace("#$","").replace("#",""))):[]})).map(E=>({func:E.func,relation:M.filter(q=>E.dim.map(z=>z.id).includes(q.dim_id)||q.cat_opt_temp.find(z=>E.dim.map(N=>N.id).includes(z.dim_id)))}));L([...j])}function Z(b,M){const $=b.dim_id,j=a.filter(N=>N.id==$).map(N=>N.name),E=a.filter(N=>b.cat_opt_temp.map(X=>X.dim_id).includes(N.id)).filter(N=>N).map(N=>N.name),z=[...j,...E].map(N=>({name:N,relation:M.map(X=>{if(X.cat_opt_temp.filter(H=>H.func).filter(H=>H.func.includes(`#$${N}#`)).length>0)return X}).filter(X=>X)}));V([...z])}function ne(b,M){const $=b.dim_id,j=M.filter(E=>E.cat_opt_temp.find(q=>q.dim_ref_id==$&&q.dim_ref_id));f([...j])}function oe(b,M){const $=M.filter(j=>b.cat_opt_temp.filter(E=>E.dim_ref_id).map(E=>E.dim_ref_id).includes(j.dim_id));C([...$])}function se(b){t("/mapps/categories/categories/edit/"+b.currentTarget.dataset.key)}function W(b){t("/mapps/categories/categoriesOptions?catOptionId="+b.currentTarget.dataset.key)}return s(g)&&p?s(g)&&p&&y(x,{children:[e(_,{container:!0,style:{flexFlow:"row",gap:"1rem"},title:"Category Relations by Key",children:y(c,{container:!0,spacing:3,children:[e(c,{item:!0,xs:4,sm:4,children:e(l,{title:v(n,"Linked Categories"),children:e(D,{className:"mapps-io-list-link",style:{width:"100%"},children:p.category_link.map((b,M)=>e(c,{className:"mapps-io-list-item",children:e(P,{"data-key":b.category_id,button:!0,onClick:se,children:e(U,{children:b.category["category_"+m]})})},b.category_id))})})}),e(c,{item:!0,xs:4,sm:4,children:e(l,{title:v(n,"This Category Option is linked as Related Dim"),children:e(D,{className:"mapps-io-list-link",style:{width:"100%"},children:S.map(b=>e(c,{className:"mapps-io-list-item",children:e(P,{"data-key":b.id,button:!0,onClick:W,children:e(U,{children:b.name})})},b.id))})})}),e(c,{item:!0,xs:4,sm:4,children:e(l,{title:v(n,"This Category Option use other Category Options"),children:e(D,{className:"mapps-io-list-link",style:{width:"100%"},children:w.map(b=>e(c,{className:"mapps-io-list-item",children:e(P,{"data-key":b.id,button:!0,onClick:W,children:e(U,{children:b.name})})},b.id))})})})]})}),e(_,{container:!0,style:{flexFlow:"row",gap:"1rem"},title:"This Category Option is used in other category option function",children:e(c,{container:!0,spacing:3,children:I.map(b=>{if(b.relation.length>0)return e(c,{item:!0,xs:4,sm:4,children:e(l,{title:v(n,`[${b.name}] `),children:e(D,{className:"mapps-io-list-link",style:{width:"100%"},children:b.relation.map(M=>e(c,{className:"mapps-io-list-item",children:e(P,{"data-key":M.id,button:!0,onClick:W,children:e(U,{children:M.name})})},M.id))})})})})})}),e(_,{container:!0,style:{flexFlow:"row",gap:"1rem"},title:"Category Options Related by this Category Option Functions",children:e(c,{container:!0,spacing:3,children:h.map(b=>{if(b.relation.length>0)return e(c,{item:!0,xs:4,sm:4,children:e(l,{title:v(n,`[${b.func}]`),children:e(D,{className:"mapps-io-list-link",style:{width:"100%"},children:b.relation.map(M=>e(c,{className:"mapps-io-list-item",children:e(P,{"data-key":M.id,button:!0,onClick:W,children:e(U,{children:M.name})})},M.id))})})})})})})]}):e(x,{})}function Le({categoryOptionId:g}){const{functions:{setTitle:v}}=ue(),n=o.useMemo(T().Layouts.Groups.V1),l=o.useMemo(T().Layouts.Tab.V1),_=o.useMemo(T().BodyLoader),{hooks:{setCategoryOptionId:d},selectors:{getCategoryOptionsById:u,getCategoryTypes:r}}=R(),s=de(),[a,t]=o.useState(),[m,p]=o.useState(),i=o.useMemo(()=>new URLSearchParams(s.search).get("catOptionId")||g,[s.search,g]),[S,f]=o.useState(!1);o.useEffect(()=>{v("Category Option")},[]),o.useEffect(()=>{p(u)},[u]),o.useEffect(()=>{f(!0),i=="new"?p({}):(d(i),t(i)),setTimeout(()=>{f(!1)},500)},[i]);function w(){return["SELECT","MULTISELECT"].includes(r.find(V=>V.id==m.cot_id).type)}function C(){return["MULTISELECT"].includes(r.find(V=>V.id==m.cot_id).type)}function I(){return["IMAGES"].includes(r.find(V=>V.id==m.cot_id).type)}return S||!m?e(c,{style:{height:"400px",display:"flex"},children:e(_,{text:" ",size:"25px"})}):!S&&m&&y(c,{container:!0,children:[!a&&e(x,{children:e(n,{title:"Create Category Option",children:e(Oe,{})})}),a&&y(x,{children:[" ",y(c,{container:!0,style:{flexFlow:"row"},children:[e(n,{xs:12,sm:6,title:"Category Option Detail",children:e(te,{catOptionId:a,readOnly:!0})}),e(n,{title:"Category Option Templates",xs:12,sm:6,children:e(ee,{catOptionId:a,readOnly:!0})})]}),e(l,{defaultTab:0,tabConfig:[{label:"Core",render:()=>e(te,{catOptionId:a})},{label:"Translation",render:()=>e(Ce,{catOptionId:a})},w()&&{label:"Validation",render:()=>e(be,{catOptionId:a,isMultiselection:C})},{label:"CMS Flags",render:()=>e(ye,{catOptionId:a,isImage:I})},{label:"CMS",render:()=>e(ve,{catOptionId:a})},{label:"Category Options Items",render:()=>e(ee,{catOptionId:a})},{label:"Relations",render:()=>e(Te,{catOptionId:a})}]})]})]})}const Me=Object.freeze(Object.defineProperty({__proto__:null,default:Le},Symbol.toStringTag,{value:"Module"}));export{Le as C,te as a,Me as i};
